name: ğŸ“¥ Telegram Listener - Run Scraper on Command

on:
  # Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠØ±Ùƒ Ø§Ù„Ø¹Ù…Ù„ ÙŠØ³ØªÙ…Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Ø§Ù„Ø¨ÙˆØª
  # ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠØ±Ùƒ Ø§Ù„Ø¹Ù…Ù„ Ù‡Ùˆ Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø°ÙŠ ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø£ÙƒØ´Ù†
  # Ù„ÙŠØªÙ… ØªØ´ØºÙŠÙ„Ù‡ Ù…Ù† Ø±Ø³Ø§Ù„Ø© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù….
  telegram_action_dispatch:
    types: [message]

jobs:
  run_on_telegram_command:
    # Ø§Ù„Ø£ÙƒØ´Ù† ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡ÙŠ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯ (Ù…Ø«Ù„Ø§Ù‹ /run)
    if: |
      github.event.telegram_action_dispatch.type == 'message' && 
      startsWith(github.event.telegram_action_dispatch.text, '/run')

    runs-on: ubuntu-latest
    steps:
      - name: ğŸš€ Dispatch Scraper Workflow
        # Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙŠØ·Ù„Ø¨ Ù…Ù† GitHub ØªØ´ØºÙŠÙ„ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ monitor-moe-files-via-telegram.yml
        # ÙˆÙ‡Ùˆ Ù…Ù„ÙÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ.
        uses: peter-evans/workflow-dispatch@v2
        with:
          workflow: Monitor MOE Files via Telegram
          token: ${{ secrets.GITHUB_TOKEN }}
